syntax = "proto3";

package proto;

option go_package = "github.com/WjcHome/gohello/proto";

// 消息类型枚举
enum MessageType {
  MESSAGE_UNKNOWN = 0;
  MESSAGE_CONNECT = 1;        // 客户端连接
  MESSAGE_FRAME_DATA = 2;     // 帧数据（上下左右）
  MESSAGE_SERVER_FRAME = 3;   // 服务器帧同步数据
  MESSAGE_DISCONNECT = 4;     // 断开连接
  MESSAGE_GAME_START = 5;     // 游戏开始
}

// 输入方向
enum InputDirection {
  DIRECTION_NONE = 0;
  DIRECTION_UP = 1;
  DIRECTION_DOWN = 2;
  DIRECTION_LEFT = 3;
  DIRECTION_RIGHT = 4;
}

// 客户端帧数据（只包含上下左右）
message FrameData {
  int32 player_id = 1;              // 玩家ID
  InputDirection direction = 2;     // 方向
  int64 frame_number = 3;            // 帧号
}

// 服务器帧同步数据
message ServerFrame {
  int64 frame_number = 1;            // 帧号
  int64 timestamp = 2;                // 时间戳
  repeated FrameData frame_datas = 3; // 所有玩家的帧数据
}

// 连接消息
message ConnectMessage {
  int32 player_id = 1;
  string player_name = 2;
}



// 断开连接消息
message DisconnectMessage {
  int32 player_id = 1;
}

// 游戏开始消息
message GameStart {
  string room_id = 1;              // 房间ID
  int64 random_seed = 2;           // 随机种子
  repeated int32 player_ids = 3;  // 玩家ID列表
}



